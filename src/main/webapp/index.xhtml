<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets" template="resources/templates/template.xhtml">


    <ui:define name="content">
        <h:inputText value="#{productsBean.filter}">
            <f:ajax event="keyup" render="productTable"/>
        </h:inputText>

        <h:dataTable value="#{productsBean.products}" var="product" id="productTable">
            <h:column>
                <f:facet name="header">Product</f:facet>
                #{product.name}
            </h:column>

            <h:column>
                <f:facet name="header">Price</f:facet>
                #{product.price}
            </h:column>
            <h:column>
                <h:link outcome="product.xhtml" value="details">
                    <f:param name="productid" value="#{product.id}"/>
                </h:link>
                |
                <h:commandLink value="Add to basket" action="#{basket.addProduct(product)}"/>
            </h:column>
        </h:dataTable>
    </ui:define>
</ui:composition>